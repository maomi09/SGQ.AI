[Unit]
Description=SGQ Backend API Service
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/sgq-backend
Environment="PATH=/home/ubuntu/sgq-backend/venv/bin"
ExecStart=/home/ubuntu/sgq-backend/venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
Restart=always
RestartSec=10

# 環境變數（從系統環境變數讀取）
# 注意：實際部署時，應該在 /etc/environment 或使用 EnvironmentFile 設置
Environment="OPENAI_API_KEY=${OPENAI_API_KEY}"
Environment="SUPABASE_URL=${SUPABASE_URL}"
Environment="SUPABASE_KEY=${SUPABASE_KEY}"
Environment="SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}"

[Install]
WantedBy=multi-user.target
