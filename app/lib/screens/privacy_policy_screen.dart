import 'package:flutter/material.dart';

class PrivacyPolicyScreen extends StatelessWidget {
  const PrivacyPolicyScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('隱私權政策'),
        backgroundColor: Colors.green.shade400,
        foregroundColor: Colors.white,
      ),
      body: Container(
        decoration: BoxDecoration(
          gradient: LinearGradient(
            begin: Alignment.topLeft,
            end: Alignment.bottomRight,
            colors: [
              Colors.green.shade50,
              Colors.green.shade100,
              Colors.white,
            ],
          ),
        ),
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(20),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              const Text(
                '隱私權政策',
                style: TextStyle(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: Color(0xFF1F2937),
                ),
              ),
              const SizedBox(height: 8),
              const Text(
                '最後更新日期：2026年1月31日',
                style: TextStyle(
                  fontSize: 14,
                  color: Colors.grey,
                ),
              ),
              const SizedBox(height: 24),
              _buildSection(
                '一、隱私權政策的適用範圍',
                '本隱私權政策適用於本應用程式（以下簡稱「本應用」）所提供的所有服務。當您使用本應用時，即表示您同意本隱私權政策的內容。本應用是一個支援大學 EFL 學生進行學生生成文法問題（SGQ）活動的教育應用程式。',
              ),
              _buildSection(
                '二、個人資料的收集與使用',
                '2.1 收集的資料類型\n\n'
                '本應用會收集以下類型的個人資料：\n\n'
                '帳號資訊\n'
                '• 姓名\n'
                '• 電子郵件地址\n'
                '• 學號（學生）\n'
                '• 使用者角色（學生或老師）\n'
                '• 註冊時間\n\n'
                '學習資料\n'
                '• 您創建的題目（選擇題或問答題）\n'
                '• 題目的選項、正確答案和解釋\n'
                '• 學習進度（階段完成情況）\n'
                '• 獲得的徽章記錄\n'
                '• 文法主題的學習記錄\n\n'
                '使用記錄\n'
                '• 登入時間和登出時間\n'
                '• 使用時長（單次使用時長、全期間使用時長）\n'
                '• 登入頻率（每週登入次數）\n'
                '• 功能使用情況\n'
                '• 會話記錄（session records）\n\n'
                '設備資訊\n'
                '• 設備類型（iOS 或 Android）\n'
                '• 作業系統版本\n'
                '• 應用程式版本\n'
                '• 技術日誌資訊\n\n'
                '互動資料\n'
                '• 與 ChatGPT AI 輔助功能的對話記錄\n'
                '• 老師對學生題目的評論和反饋\n'
                '• 學生關注狀態的標記記錄\n\n'
                '2.2 資料收集的目的\n\n'
                '我們收集這些資料的目的在於：\n'
                '• 提供個人化的學習服務：根據您的學習進度和表現，提供適合的學習內容和建議\n'
                '• 追蹤學習進度並提供學習建議：記錄您的學習歷程，幫助您了解自己的學習狀況\n'
                '• 改善應用程式功能與使用者體驗：分析使用情況，優化應用程式功能和介面設計\n'
                '• 提供技術支援與客戶服務：協助解決您在使用過程中遇到的問題\n'
                '• 教育管理與評估：協助老師了解學生的學習狀況，提供適當的教學支援\n'
                '• 安全與防詐：確保應用程式的安全性，防止未經授權的存取\n\n'
                '2.3 資料處理的法律依據\n\n'
                '我們處理您的個人資料基於以下法律依據：\n'
                '• 您的明確同意\n'
                '• 履行教育服務契約的必要性\n'
                '• 遵守法律義務\n'
                '• 保護合法權益',
              ),
              _buildSection(
                '三、資料的儲存與安全',
                '3.1 資料儲存位置\n\n'
                '您的個人資料將儲存在安全的雲端資料庫中（Supabase），資料儲存位置可能位於台灣或其他符合資料保護法規的地區。\n\n'
                '3.2 安全措施\n\n'
                '我們採用以下措施保護您的資料安全：\n\n'
                '資料加密\n'
                '• 所有傳輸的資料均使用 HTTPS/TLS 加密技術保護\n'
                '• 敏感資料在儲存時進行加密處理\n\n'
                '存取控制\n'
                '• 實施 Row Level Security (RLS) 政策，確保使用者只能存取自己的資料\n'
                '• 僅授權人員（如系統管理員）可存取您的個人資料\n'
                '• 使用強密碼政策和多因素認證保護帳號安全\n\n'
                '定期備份\n'
                '• 定期備份資料以防止資料遺失\n'
                '• 備份資料同樣受到加密保護\n\n'
                '安全更新\n'
                '• 持續更新安全措施以應對新的威脅\n'
                '• 定期進行安全審計和漏洞掃描\n\n'
                '資料保留\n'
                '• 我們會根據法律要求和業務需要保留您的資料\n'
                '• 當資料不再需要時，我們會安全地刪除或匿名化處理',
              ),
              _buildSection(
                '四、資料的分享與揭露',
                '4.1 基本原則\n\n'
                '我們不會向第三方出售、交易或出租您的個人資料。\n\n'
                '4.2 可能分享資料的情況\n\n'
                '在以下情況下，我們可能會分享您的資料：\n\n'
                '服務提供者\n'
                '• 與協助我們提供服務的第三方服務提供者（如雲端儲存服務、分析服務）分享必要的資料。這些服務提供者僅能為我們提供服務而使用您的資料，不得用於其他目的。\n\n'
                '法律要求\n'
                '• 當法律要求或法院命令時，我們可能會揭露您的資料。\n'
                '• 為遵守適用的法律法規、法律程序或政府要求。\n\n'
                '保護權利\n'
                '• 為保護本應用、使用者或公眾的權利、財產或安全時。\n'
                '• 為調查、預防或處理可能的違法行為、安全威脅或欺詐行為。\n\n'
                '業務轉讓\n'
                '• 如果發生合併、收購或資產轉讓，您的資料可能會被轉移給新的所有權人。',
              ),
              _buildSection(
                '五、第三方服務',
                '本應用使用以下第三方服務，這些服務可能有其各自的隱私權政策：\n\n'
                '• Supabase：用於資料儲存與使用者認證服務。\n'
                '• OpenAI：用於提供 AI 學習輔助功能（ChatGPT）。\n'
                '• AWS：用於後端服務和資料處理。\n\n'
                '我們建議您閱讀這些第三方服務的隱私權政策，以了解他們如何處理您的資料。我們會選擇符合資料保護標準的服務提供者，並透過合約條款確保他們妥善處理您的資料。',
              ),
              _buildSection(
                '六、您的權利',
                '您對您的個人資料享有以下權利：\n\n'
                '6.1 基本權利\n\n'
                '• 查閱權：您可以隨時查看我們持有的您的個人資料。\n'
                '• 更正權：您可以要求更正不正確或不完整的資料。\n'
                '• 刪除權：您可以要求刪除您的個人資料，但某些法律要求保留的資料除外。\n'
                '• 撤回同意：您可以隨時撤回對資料處理的同意。\n'
                '• 資料可攜權：您可以要求以結構化、常用且機器可讀的格式取得您的資料。\n'
                '• 限制處理權：在某些情況下，您可以要求限制我們對您資料的處理。\n'
                '• 反對權：您可以反對我們基於合法利益處理您的資料。\n\n'
                '6.2 如何行使權利\n\n'
                '如需行使上述權利，請透過以下方式與我們聯繫：\n'
                '• 應用程式內聯絡功能：透過「回報錯誤」頁面發送訊息\n'
                '• 電子郵件：sgqaiapp@gmail.com\n\n'
                '我們會在收到您的請求後，在合理時間內（通常為 30 天內）回應您的請求。',
              ),
              _buildSection(
                '七、Cookie 與追蹤技術',
                '7.1 使用的技術\n\n'
                '本應用可能會使用 Cookie 和類似的追蹤技術來改善使用者體驗、分析使用情況並提供個人化內容。這些技術包括：\n'
                '• 本地儲存（Local Storage）\n'
                '• 會話儲存（Session Storage）\n'
                '• 應用程式快取\n\n'
                '7.2 管理偏好\n\n'
                '您可以透過設備設定管理本地儲存和 Cookie 偏好。請注意，停用某些技術可能會影響應用程式的功能。',
              ),
              _buildSection(
                '八、兒童隱私',
                '8.1 適用對象\n\n'
                '本應用主要面向教育用途，主要使用者為大學生，但可能會有未滿 18 歲的使用者。\n\n'
                '8.2 保護措施\n\n'
                '我們會特別注意保護兒童的隱私，並遵守相關的兒童隱私保護法規：\n'
                '• 不會故意收集未滿 13 歲兒童的個人資料（如適用）\n'
                '• 對於未滿 18 歲的使用者，我們建議在監護人的指導下使用本應用\n'
                '• 如果發現我們無意中收集了兒童的個人資料，我們會立即刪除相關資料',
              ),
              _buildSection(
                '九、資料的國際傳輸',
                '9.1 傳輸範圍\n\n'
                '由於我們使用國際雲端服務（如 Supabase、AWS、OpenAI），您的資料可能會被傳輸到台灣以外的地區進行處理。\n\n'
                '9.2 保護措施\n\n'
                '我們會確保：\n'
                '• 選擇符合國際資料保護標準的服務提供者\n'
                '• 透過合約條款確保資料處理符合適用的資料保護法規\n'
                '• 實施適當的技術和組織措施保護資料安全',
              ),
              _buildSection(
                '十、隱私權政策的變更',
                '10.1 政策更新\n\n'
                '我們可能會不定期更新本隱私權政策，以反映：\n'
                '• 法律法規的變更\n'
                '• 服務功能的變更\n'
                '• 資料處理方式的變更\n'
                '• 使用者反饋和建議\n\n'
                '10.2 通知方式\n\n'
                '重大變更時，我們會透過以下方式通知您：\n'
                '• 應用程式內通知\n'
                '• 電子郵件通知（如您已提供電子郵件）\n'
                '• 在應用程式內顯示更新提示\n\n'
                '10.3 繼續使用\n\n'
                '繼續使用本應用即表示您接受更新後的政策。如果您不同意更新後的政策，請停止使用本應用並聯繫我們刪除您的帳號。\n\n'
                '10.4 查看最新版本\n\n'
                '本隱私權政策的最新版本將始終在應用程式內和本文件中提供。我們建議您定期查看本政策以了解最新變更。',
              ),
              _buildSection(
                '十一、資料外洩通知',
                '11.1 外洩處理\n\n'
                '如果發生資料外洩事件，我們會：\n'
                '• 立即採取措施阻止進一步的資料外洩\n'
                '• 評估外洩的影響範圍和嚴重程度\n'
                '• 在發現後 72 小時內（如適用）通知相關監管機關\n'
                '• 在合理時間內通知受影響的使用者\n\n'
                '11.2 通知內容\n\n'
                '通知將包括：\n'
                '• 外洩事件的性質和範圍\n'
                '• 可能受影響的資料類型\n'
                '• 我們已採取和建議採取的措施\n'
                '• 聯絡方式以便您獲得更多資訊',
              ),
              _buildSection(
                '十二、聯絡我們',
                '12.1 聯絡方式\n\n'
                '如果您對本隱私權政策有任何疑問、意見或需要行使您的權利，請透過以下方式與我們聯繫：\n'
                '• 應用程式內聯絡功能：透過「回報錯誤」頁面發送訊息\n'
                '• 電子郵件：sgqaiapp@gmail.com\n\n'
                '12.2 回應時間\n\n'
                '我們會盡快回覆您的詢問，通常在收到您的請求後 7 個工作天內回覆。\n\n'
                '12.3 投訴管道\n\n'
                '如果您認為我們對您的個人資料處理不符合本隱私權政策或相關法律法規，您有權向相關監管機關提出投訴。',
              ),
              _buildSection(
                '十三、其他重要資訊',
                '13.1 資料控制者\n\n'
                '本應用的資料控制者為本應用的開發和營運團隊。\n\n'
                '13.2 適用法律\n\n'
                '本隱私權政策適用於台灣地區的法律法規。如果您位於其他地區，請注意當地的資料保護法規可能有所不同。\n\n'
                '13.3 語言版本\n\n'
                '本隱私權政策以繁體中文版本為準。如有其他語言版本，僅供參考，如有歧義，以繁體中文版本為準。\n\n'
                '13.4 條款效力\n\n'
                '如果本隱私權政策的任何條款被認定為無效或不可執行，其餘條款仍然有效。\n\n'
                '感謝您使用本應用程式。我們致力於保護您的隱私並提供優質的學習體驗。',
              ),
              const SizedBox(height: 32),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildSection(String title, String content) {
    return Padding(
      padding: const EdgeInsets.only(bottom: 24),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            title,
            style: const TextStyle(
              fontSize: 18,
              fontWeight: FontWeight.bold,
              color: Color(0xFF1F2937),
            ),
          ),
          const SizedBox(height: 12),
          Text(
            content,
            style: TextStyle(
              fontSize: 15,
              height: 1.6,
              color: Colors.grey[800],
            ),
          ),
        ],
      ),
    );
  }
}
